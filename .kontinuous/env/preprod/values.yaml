api:
  vars:
    EGAPRO_SEND_EMAILS: "True"
    EGAPRO_SMTP_HOST: maildev
    EGAPRO_SMTP_PORT: "1025"
    EGAPRO_SMTP_LOGIN: ""
    EGAPRO_SMTP_PASSWORD: ""
    EGAPRO_SMTP_SSL: ""
  autoscale:
    enabled: true
  resources:
    requests:
      cpu: 100m
      memory: 640M
    limits:
      cpu: 200m
      memory: 1G

app:
  vars:
    MAILER_ENABLE: "True"
    MAILER_SMTP_HOST: maildev
    MAILER_SMTP_PORT: "1025"
    MAILER_SMTP_LOGIN: ""
    MAILER_SMTP_PASSWORD: ""
    MAILER_SMTP_SSL: "False"
  autoscale:
    enabled: true
  resources:
    requests:
      cpu: 20m
      memory: 196M
    limits:
      cpu: 125m
      memory: 1G

maildev: {}

pgadmin:
  ~chart: app
  ~needs: [build-pgadmin]
  imagePackage: pgadmin
  host: "pgadmin-{{ .Values.global.host }}"
  probesPath: /misc/ping
  certSecretName: api-crt

job:
  runs:
    build-pgadmin:
      use: build
      envFrom:
        - secretRef:
            name: "{{ .Values.global.pgSecretName }}"
      with:
        imagePackage: pgadmin
        context: docker/pgadmin
        buildArgs:
          PGHOST: "$(PGHOST)"
          PGDATABASE: "$(PGDATABASE)"
          PGPORT: "$(PGPORT)"
          PGUSER: "$(PGUSER)"
          PGPASSWORD: "$(PGPASSWORD)"
          PGSSLMODE: "$(PGSSLMODE)"