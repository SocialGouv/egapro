generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model archive {
  siren String?
  year  Int?
  at    DateTime? @default(now()) @db.Timestamptz(6)
  by    String?
  ip    String?   @db.Inet
  data  Json?

  @@ignore
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
// Keeping only the representation_equilibree related models

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model representation_equilibree {
  siren                            String
  year                             Int
  modified_at                      DateTime?                         @db.Timestamptz(6)
  declared_at                      DateTime?                         @db.Timestamptz(6)
  data                             Json?
  ft                               Unsupported("tsvector")?
  search_representation_equilibree search_representation_equilibree?

  @@id([siren, year])
  @@index([year], map: "idx_representation_equilibree_year")
  @@index([siren], map: "idx_siren")
}

model search_representation_equilibree {
  siren                     String
  year                      Int
  declared_at               DateTime?                 @db.Timestamptz(6)
  ft                        Unsupported("tsvector")?
  region                    String?                   @db.VarChar(2)
  departement               String?                   @db.VarChar(3)
  section_naf               String?                   @db.Char(1)
  representation_equilibree representation_equilibree @relation(fields: [siren, year], references: [siren, year], onDelete: Cascade, map: "representation_equilibree_exists")

  @@id([siren, year])
  @@index([declared_at], map: "idx_representation_equilibree_declared_at")
  @@index([departement], map: "idx_representation_equilibree_departement")
  @@index([ft], map: "idx_representation_equilibree_ft", type: Gin)
  @@index([section_naf], map: "idx_representation_equilibree_naf")
  @@index([region], map: "idx_representation_equilibree_region")
  @@index([siren], map: "idx_search_representation_equilibree_siren")
  @@index([year], map: "idx_search_representation_equilibree_year")
}

// simulation and others are omitted from Prisma model to keep the client focused
